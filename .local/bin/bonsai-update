#!/bin/bash
#bonsai-update - written by Alex Haskins
#Updates all the various packages, package managers, and branches on the new bonsai linux

#help
function fhelp() {
	echo "bonsai-update: update frontend for the new bonsai linux"
	echo
	echo "usage: bonsai-update <argument>"
	echo
	echo "Possible  arguments:"
	echo "  pacstall"
	echo "  deb-get"
	echo "  nala"
	echo "  apt"
	echo "  homebrew"
	echo "  arch"
	echo "  debian"
	echo "  fedora"
	echo "  all"
	echo 
	echo "BUGGED: distrobox/distro"
}

#pacstall
function fpactsall() {
	pacstall -U
	pacstall -Up
}

#deb-get
function fdeb-get() {
	sudo deb-get update
	sudo deb-get upgrade
	sudo deb-get clean
}

#nala
function fnala() {
	sudo nala upgrade
	sudo nala autopurge
	sudo nala clean
}

#apt
function fapt() {
	sudo apt update
	sudo apt upgrade
	sudo apt autoremove
	sudo apt clean
}

#homebrew
function fhomebrew() {
	brew update
	brew upgrade
	brew cleanup
}

#distrobox arch
function farch() {
	distrobox-enter arch -T -- sudo pacman -Syu
	distrobox-enter arch -T -- sudo pacman -Qdt
	distrobox-enter arch -T -- sudo pacman -Scc
}

#distrobox debian
function fdebian() {
	distrobox-enter debian -T -- sudo apt update
	distrobox-enter debian -T -- sudo apt upgrade
	distrobox-enter debian -T -- sudo apt autoremove
	distrobox-enter debian -T -- sudo apt clean
}


#distrobox fedora
function ffedora() {
	distrobox-enter fedora -T -- sudo dnf upgrade
	distrobox-enter fedora -T -- sudo dnf autoremove
	distrobox-enter fedora -T -- sudo dnf clean dbcache
}

#distrobox all
function fdistro() {
	distrobox-upgrade --all
}

#all
function fall() {
	fpactsall
	fdeb-get
	fnala
	fapt
	fhomebrew
	farch
	fdebian
	ffedora
	exit 0
}

while getopts h: flag
do
    case "${flag}" in
        h) help;;
    esac
done

case "$1" in
	pacstall) fpactsall;;
	deb-get) fdeb-get;;
	nala) fnala;;
	apt) fapt;;
	homebrew) fhomebrew;;
	arch) farch;;
	debian) fdebian;;
	fedora) ffedora;;
	distro) fdistro;;
	distrobox) fdistro;;
	distro-box) fdistro;;
	all) fall;;
	*) fhelp;;
esac
exit 0
